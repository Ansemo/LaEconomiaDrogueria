<div class="login-container">
  <app-logo></app-logo>
  <mat-card class="login-card">
    <mat-card-content class="login-card__content">
      <div class="login-card__form-container">
        <form
          [formGroup]="loginForm"
          class="login-form"
          (ngSubmit)="onSubmit()"
        >
          <label for="email" class="login-form__label"
            >Correo electrónico</label
          >
          <input
            matInput
            type="email"
            id="email"
            name="email"
            class="login-form__input"
            formControlName="email"
            #emailInput
          />
          @if(loginForm.get('email')?.touched &&
          loginForm.get('email')?.hasError('required')){
          <mat-error> El correo electrónico es requerido </mat-error>
          } @if(loginForm.get('email')?.hasError('email')){
          <mat-error> Debe ser un correo electrónico válido </mat-error>
          }
          <label for="password" class="login-form__label">Contraseña</label>
          <div class="login-form__input-container">
            <input
              matInput
              type="password"
              id="password"
              name="password"
              class="login-form__input"
              [type]="hide ? 'password' : 'text'"
              formControlName="password"
            />
            <button
              type="button"
              class="login-form__toggle-password"
              (click)="togglePassword()"
            >
              <mat-icon>{{ hide ? "visibility" : "visibility_off" }}</mat-icon>
            </button>
          </div>

          @if(loginForm.get('password')?.touched &&
          loginForm.get('password')?.hasError('required')){
          <mat-error> La contraseña es requerida </mat-error>
          }

          <a routerLink="/request-reset" class="login-form__forgot-password"
            >He olvidado mi contraseña</a
          >
          <button
            mat-raised-button
            type="submit"
            class="login-form__submit-button"
            [disabled]="loading"
          >
            Iniciar sesión
          </button>
          <span class="login-form__signup-text"
            >¿Todavía no tienes una cuenta?</span
          >
          <a routerLink="/register" class="login-form__signup-link"
            >Regístrate aquí</a
          >
          @if(errorMessage){ }
        </form>
      </div>
    </mat-card-content>
  </mat-card>
</div>
